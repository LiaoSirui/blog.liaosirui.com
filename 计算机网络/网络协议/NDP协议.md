邻居发现协议 NDP（Neighbor Discovery Protocol）是 IPv6 协议体系中一个重要的基础协议。邻居发现协议替代了 IPv4 的 ARP（Address Resolution Protocol）和 ICMP 路由器发现（Router Discovery），它定义了使用 ICMPv6 报文实现地址解析，跟踪邻居状态，重复地址检测，路由器发现以及重定向等功能。

在 IPv4 中，当主机需要和目标主机通信时，必须先通过 ARP 协议获得目的主机的链路层地址。在 IPv6 中，同样需要从 IP 地址解析到链路层地址的功能。邻居发现协议实现了这个功能。

ARP 报文是直接封装在以太网报文中，以太网协议类型为 0x0806，普遍观点认为 ARP 定位为第 2.5 层的协议。ND 本身基于 ICMPv6 实现，以太网协议类型为 0x86DD，即 IPv6 报文，IPv6 下一个报头字段值为 58，表示 ICMPv6 报文，由于 ND 协议使用的所有报文均封装在 ICMPv6 报文中，一般来说，ND 被看作第 3 层的协议。在三层完成地址解析，主要带来以下几个好处：

- 地址解析在三层完成，不同的二层介质可以采用相同的地址解析协议。
- 可以使用三层的安全机制避免地址解析攻击。
- 使用组播方式发送请求报文，减少了二层网络的性能压力。

地址解析过程中使用了两种 ICMPv6 报文：邻居请求报文 NS（Neighbor Solicitation）和邻居通告报文 NA（Neighbor
Advertisement）。

- NS 报文：Type 字段值为 135，Code 字段值为 0，在地址解析中的作用类似于 IPv4 中的 ARP 请求报文。
- NA 报文：Type 字段值为 136，Code 字段值为 0，在地址解析中的作用类似于 IPv4 中的 ARP 应答报文。